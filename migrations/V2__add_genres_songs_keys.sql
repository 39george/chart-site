CREATE TYPE MusicKey
AS ENUM
(
    'a_minor', 'a_major', 'b_flat_minor', 'b_flat_major',
    'b_minor', 'b_major', 'c_minor', 'c_major',
    'c_sharp_minor', 'c_sharp_major', 'd_minor', 'd_major',
    'e_flat_minor', 'e_flat_major', 'e_minor', 'e_major',
    'f_minor', 'f_major', 'f_sharp_minor', 'f_sharp_major',
    'g_minor', 'g_major', 'a_flat_minor', 'a_flat_major'
);

-- Basic tables
CREATE TABLE genres (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    name VARCHAR(50) NOT NULL UNIQUE
);

INSERT INTO genres (name)
VALUES 
('абстрактный'),
('акапелла'),
('эсид'),
('эсид джаз'),
('эсид панк'),
('эсид рэп'),
('акустический'),
('афробит'),
('альтернатива'),
('альтернативный рок'),
('эмбиент'),
('аниме'),
('авангард'),
('баллада'),
('бас'),
('биты с хуками'),
('бибоп'),
('биг-бенд'),
('блэк-метал'),
('блюграсс'),
('блюз'),
('бритпоп'),
('кабаре'),
('кельтская музыка'),
('камерная музыка'),
('шансон'),
('хор'),
('христианская музыка'),
('христианский рок'),
('кинематографическая'),
('классический рок'),
('классик'),
('клубная'),
('клубный хаус'),
('комедия'),
('сознательная музыка'),
('современная христианская музыка'),
('кантри'),
('кантри-рэп'),
('кранк'),
('культовая музыка'),
('танцевальная'),
('дэнсхолл'),
('дарквейв'),
('дэт-метал'),
('диско'),
('дрим'),
('дрилл'),
('драм-н-бэйс'),
('соло на барабанах'),
('дабстеп'),
('дуэт'),
('легкая музыка'),
('электро'),
('этническая музыка'),
('евро-хаус'),
('евро-техно'),
('евродэнс'),
('экспериментальная'),
('фолк'),
('фолк-рок'),
('фольклор'),
('фристайл'),
('фанк'),
('фьюжн'),
('футуристическая'),
('джи-фанк'),
('музыка из игр'),
('гангста-рэп'),
('гетто хаус'),
('госпел'),
('готика'),
('готический рок'),
('грайм'),
('гранж'),
('хард-рок'),
('хардкор'),
('хэви-метал'),
('хип-хоп'),
('хорроркор'),
('хаус'),
('инди'),
('индастриал'),
('инструментальная'),
('инструментальный поп'),
('инструментальный рок'),
('джаз'),
('джаз/фанк'),
('джей-поп'),
('джангл'),
('латина'),
('лоу-фай'),
('медитативная'),
('метал'),
('мюзикл'),
('национальный фолк'),
('нью эйдж'),
('нью скул'),
('нью вейв'),
('олд скул'),
('опера'),
('оркестровая музыка'),
('прочее'),
('поп'),
('поп-фолк'),
('поп/Фанк'),
('прогрессивный рок'),
('психоделика'),
('психоделический рок'),
('панк'),
('панк-рок'),
('r&b'),
('рэп'),
('рейв'),
('регги'),
('реггетон'),
('ретро'),
('ритмический соул'),
('рок'),
('рок-н-ролл'),
('сальса'),
('самба'),
('ска'),
('слоу джэм'),
('слоу рок'),
('соната'),
('соул'),
('саундтрек'),
('космическая музыка'),
('речь'),
('свинг'),
('симфонический рок'),
('симфония'),
('синтпоп'),
('танго'),
('техно'),
('техно-индастриал'),
('транс'),
('трэп'),
('трэш метал'),
('трип-хоп'),
('андерграунд'),
('вокал'),
('мировая музыка'),
('зук');

CREATE TABLE songs (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    primary_genre INTEGER NOT NULL REFERENCES genres(id) ON DELETE RESTRICT,
    secondary_genre INTEGER REFERENCES genres(id) ON DELETE RESTRICT,
    sex VARCHAR(6) NOT NULL CHECK (sex IN ('male', 'female')),
    tempo SMALLINT NOT NULL,
    key MusicKey NOT NULL,
    duration SMALLINT NOT NULL,
    lyric VARCHAR(1000) NOT NULL,
    cover_object_key VARCHAR(500) NOT NULL UNIQUE,
    audio_object_key VARCHAR(500) NOT NULL UNIQUE
);
